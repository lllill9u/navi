package kr.or.navi.quick.food.service;

import java.util.HashMap;
import java.util.List;

import javax.inject.Inject;

import org.springframework.stereotype.Service;

import kr.or.navi.quick.food.dao.FoodDAO;
import kr.or.navi.quick.food.vo.FoodVO;
import kr.or.navi.quick.news.service.NewsServiceImpl;
import kr.or.navi.vo.EmpVO;
import lombok.extern.slf4j.Slf4j;


@Slf4j
@Service
public class FoodServiceImpl implements FoodService {

	@Inject
	private FoodDAO dao;
	
	@Override
	public List<FoodVO> selectFoodsList() {// 음식점 전체 조회
		log.info("dao.selectfoodList():{}" ,dao.selectFoodList());
		return dao.selectFoodList();
	}

	@Override
	public FoodVO selectOne(String foodId) {
		log.info("dao.selectOne(foodId):{}" ,dao.selectOne(foodId));
		return dao.selectOne(foodId);
	}

	
	
	@Override
	public List<FoodVO> recomFoodList(EmpVO vo) {
		Integer empAge = vo.getEmpAge();
		String empGen = vo.getEmpGen();
		HashMap<String, String> map = trasEmpData(empAge, empGen);
		log.info("map:{}", map);
		return dao.selectRecomfoodList(map);
		
	}

	@Override
	public int insertFoodView(String empId, String foodId) {
		return dao.insertFood(empId, foodId);
	}

	
	// recomFoodlist의 map  데이터 메소드
	private HashMap<String, String> trasEmpData(Integer empAge, String empGen) {
		HashMap<String, String> map = new HashMap<String, String>();
		if (empAge >= 20) {
			map.put("age", "0");
		} else if (empAge >= 30) {
			map.put("age", "1");
		} else if (empAge >= 40) {
			map.put("age", "2");
		} else if (empAge >= 50) {
			map.put("age", "3");
		} else {
			map.put("age", "4");
		}

		if (empGen.equals("F")) {
			map.put("gen", "0");
		} else {
			map.put("gen", "1");
		}
		return map;
	}


}
